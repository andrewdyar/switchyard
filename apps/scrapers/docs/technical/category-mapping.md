# Category Mapping

## Goods Master Categories

This category structure exactly matches the Supabase Goods category hierarchy (source='goods'). All level 3 and 4 categories listed below are present in Supabase and must be preserved.

```
1. Baby & kids
   ├── Baby safety
   │  ├── Door & drawer locks
   │  └── Electrical protection
   ├── Bath tubs & accessories
   │  ├── Bath accessories
   │  └── Bath tubs
   ├── Clothes
   │  └── Bibs
   ├── Diapers & potty
   │  ├── Baby wipes
   │  ├── Changing pads
   │  ├── Diaper bags & storage
   │  ├── Diaper pails & refills
   │  ├── Diapers
   │  ├── Potty seats & stools
   │  └── Training pants
   ├── Feeding
   │  ├── Bottle feeding
   │  │  ├── Bottles
   │  │  ├── Carrying & warming
   │  │  ├── Cleaning
   │  │  └── Nipples
   │  ├── Breast feeding
   │  │  ├── Breast feeding accessories
   │  │  ├── Breast feeding supplements
   │  │  ├── Breast pumps
   │  │  ├── Milk storage
   │  │  └── Nursing pads
   │  ├── Cups
   │  ├── Dishes & utensils
   │  └── Pacifiers
   ├── Food & formula
   │  ├── Baby food
   │  ├── Electrolytes & shakes
   │  ├── Formula
   │  ├── Juice & water
   │  └── Toddler food
   ├── Health & skin care
   │  ├── Bath & hair care
   │  ├── Bug repellent
   │  ├── Humidifiers
   │  ├── Lotion & powder
   │  ├── Medical devices & supplies
   │  ├── Nose wipes
   │  ├── Surface wipes
   │  └── Teething
   ├── Nursery & kids' room
   │  ├── Blankets & pillows
   │  ├── High chairs & booster seats
   │  └── Sleep aids
   ├── Toys
   │  ├── Action figures & dolls
   │  ├── Baby toys
   │  ├── Dress up & pretend play
   │  ├── Games & books
   │  │  ├── Books & coloring
   │  │  ├── Games
   │  │  ├── Puzzles
   │  │  └── Spinners & yo-yos
   │  ├── Lego & building blocks
   │  ├── Outdoor toys
   │  │  ├── Balls
   │  │  ├── Blasters
   │  │  ├── Bubbles
   │  │  └── Yard & sandbox toys
   │  ├── Playsets
   │  ├── Plush toys
   │  ├── Remote control toys
   │  ├── Slime
   │  └── Toy vehicles
   └── Travel equipment
      ├── Covers & shades
      └── Mirrors

2. Bakery & bread
   ├── Bread
   │  ├── Bagels
   │  ├── Buns & rolls
   │  ├── English muffins
   │  ├── Loaves
   │  ├── Pitas & flatbread
   │  ├── Pizza crusts
   │  └── Sliced bread
   ├── Cakes
   │  ├── Standard cakes
   │  └── Standard cupcakes
   └── Desserts & pastries
      ├── Brownies & bars
      ├── Cheesecakes
      ├── Cream puffs & eclairs
      ├── Croissants & puff pastries
      ├── Cupcakes
      ├── Donuts
      ├── Flan & bread pudding
      ├── Muffins
      ├── Pies
      ├── Sweet rolls & scones
      └── Tarts & macarons

3. Beverages
   └── Beer & wine
      ├── Beer
      ├── Cocktail mixers
      ├── Hard cider
      ├── Malt beverages & coolers
      └── Wine

4. Deli & prepared food
   ├── Party trays
   │  └── Standard party trays
   └── Ready meals & snacks
      ├── Appetizers
      ├── Entrees & sides
      ├── Meal kits
      ├── Pizza
      ├── Salads
      ├── Sandwiches
      ├── Snack trays
      ├── Soup
      └── Sushi

5. Everyday essentials
   ├── Air fresheners & candles
   │  ├── Air fresheners
   │  ├── Candles
   │  ├── Diffusers
   │  ├── Incense
   │  ├── Moisture absorbers
   │  └── Scented oils & wax
   ├── Cleaners
   │  ├── All purpose cleaners
   │  ├── Carpet & upholstery cleaners
   │  ├── Dish soap & detergent
   │  ├── Drain cleaners
   │  ├── Metal & stone cleaners
   │  ├── Oven & stove cleaners
   │  ├── Toilet bowl cleaners
   │  └── Wood cleaner & polish
   ├── Cleaning tools
   │  ├── Brooms & dust mops
   │  ├── Brushes
   │  ├── Buckets & caddies
   │  ├── Cleaning cloths & dusters
   │  ├── Dish drainers
   │  ├── Dustpans
   │  ├── Gloves
   │  ├── Mops
   │  ├── Sponges & scrubbers
   │  ├── Spray bottles & squeegees
   │  └── Trash cans
   ├── Disposable kitchenware
   │  ├── Bakeware
   │  ├── Drinkware
   │  ├── Flatware & utensils
   │  ├── Napkins & table cloths
   │  ├── Plates & bowls
   │  ├── Serveware
   │  ├── Straws
   │  └── Toothpicks
   ├── Food storage & wraps
   │  ├── Chip clips
   │  ├── Containers
   │  ├── Foil & plastic wrap
   │  ├── Reusable shopping bags
   │  └── Storage bags
   └── Laundry
      ├── Bleach
      ├── Detergent
      ├── Fabric dye
      ├── Fresheners
      ├── Hampers & laundry bags
      ├── Ironing
      ├── Lint rollers
      ├── Sewing
      ├── Softeners
      ├── Stain removers
      └── Starch

6. Frozen food
   ├── Bread & baked goods
   │  ├── Bread
   │  │  ├── Bagels
   │  │  ├── Biscuits
   │  │  ├── Buns & rolls
   │  │  ├── Loaves
   │  │  ├── Pitas & flatbread
   │  │  └── Pizza crusts
   │  ├── Desserts & pastries
   │  └── Tortillas
   ├── Fruit
   │  ├── Bananas
   │  ├── Berries & cherries
   │  ├── Mixed fruit
   │  ├── Peaches
   │  └── Tropical & specialty
   ├── Ice cream & treats
   │  ├── Bars & pops
   │  ├── Cones & sandwiches
   │  ├── Frozen yogurt
   │  ├── Ice cream
   │  ├── Sorbet
   │  ├── Sundae toppings
   │  └── Waffle bowls & cones
   ├── Meals & sides
   │  ├── Appetizers
   │  ├── Entrees & sides
   │  ├── Pizza
   │  ├── Sandwiches
   │  └── Soup
   ├── Meat
   │  ├── Beef & veal
   │  ├── Chicken
   │  ├── Duck & quail
   │  ├── Meatballs
   │  ├── Pork
   │  ├── Sausages & hot dogs
   │  └── Turkey
   ├── Seafood
   │  ├── Fish
   │  └── Shrimp & shellfish
   └── Vegetables
      ├── Artichokes & asparagus
      ├── Beans & peas
      ├── Broccoli, cauliflower & cabbage
      ├── Corn
      ├── Leafy greens
      ├── Mixed vegetables
      ├── Onions & garlic
      ├── Peppers
      ├── Potatoes & carrots
      ├── Specialty & Asian
      └── Squash & zucchini

7. Fruit & vegetables
   ├── Fruit
   │  ├── Apples
   │  ├── Bananas
   │  ├── Berries & cherries
   │  ├── Citrus
   │  ├── Grapes
   │  ├── Melons
   │  ├── Mixed fruit
   │  ├── Pears
   │  └── Specialty & tropical
   └── Vegetables
      ├── Artichokes & asparagus
      ├── Avocados
      ├── Beans & peas
      ├── Broccoli, cauliflower & cabbage
      ├── Celery & cucumbers
      ├── Corn
      ├── Herbs
      ├── Lettuce & leafy greens
      ├── Mixed vegetables
      ├── Mushrooms
      ├── Onions & garlic
      ├── Peppers
      ├── Potatoes & carrots
      ├── Specialty & Asian
      ├── Squash & pumpkins
      └── Tomatoes

8. Health & beauty
   ├── Bath & skin care
   │  ├── Accessories
   │  ├── Bath & skin care sets
   │  ├── Body powder
   │  ├── Body scrubs
   │  ├── Bubble bath & salts
   │  ├── Cleansers & soaps
   │  │  ├── Body wash
   │  │  ├── Facial cleansers & scrubs
   │  │  ├── Hand & bar soap
   │  │  ├── Hand sanitizer
   │  │  ├── Makeup remover
   │  │  └── Toners
   │  ├── Deodorant & antiperspirant
   │  ├── Essential oils
   │  ├── Facial masks & treatments
   │  ├── Fragrance
   │  ├── Moisturizers
   │  │  ├── Body lotion
   │  │  ├── Eye cream
   │  │  └── Facial moisturizer
   │  ├── Shaving & hair removal
   │  │  ├── Aftershave
   │  │  ├── Beard care
   │  │  ├── Depilatories & wax
   │  │  ├── Electric shavers & trimmers
   │  │  ├── Razors & blades
   │  │  └── Shaving cream
   │  └── Sunscreen & self tanners
   ├── Eye & ear care
   │  ├── Contact lens solution & cases
   │  ├── Ear plugs
   │  ├── Ear wash & drops
   │  ├── Eye drops & lubricants
   │  ├── Eye wash
   │  └── Eyewear & accessories
   ├── Feminine care
   │  ├── Medicines & treatments
   │  ├── Pads & liners
   │  ├── Tampons
   │  └── Wipes & washes
   ├── Hair care
   │  ├── Brushes & combs
   │  ├── Curling & flat irons
   │  ├── Hair accessories
   │  ├── Hair color
   │  ├── Hair dryers
   │  ├── Shampoo & conditioner
   │  └── Styling products & treatments
   ├── Home health care
   │  ├── Canes & supports
   │  ├── Diabetic supplies
   │  │  ├── Diabetic lotions
   │  │  ├── Glucose monitors
   │  │  ├── Insulin & glucose
   │  │  ├── Lances
   │  │  ├── Needles
   │  │  └── Test strips
   │  └── Pill cutters & organizers
   ├── Makeup
   │  ├── Eyes
   │  │  ├── Brow pencils & powder
   │  │  ├── Eyeliner
   │  │  ├── Eyeshadow
   │  │  ├── False eyelashes
   │  │  └── Mascara
   │  ├── Face
   │  │  ├── BB cream
   │  │  ├── Blush
   │  │  ├── Bronzers & highlighters
   │  │  ├── Concealer & color corrector
   │  │  ├── Contour
   │  │  ├── Foundation
   │  │  ├── Powder
   │  │  └── Primer & setting spray
   │  ├── Lips
   │  │  ├── Lip gloss
   │  │  ├── Lip liner
   │  │  └── Lipstick
   │  ├── Makeup palettes & sets
   │  └── Makeup tools & accessories
      │  ├── Brushes
      │  ├── Makeup bags
      │  ├── Makeup tools
      │  ├── Mirrors
      │  └── Sponges
   ├── Medicines & treatments
   │  ├── Cough, cold & flu
   │  ├── Digestion & nausea
   │  ├── First aid
   │  │  ├── Antiseptics & antibiotics
   │  │  ├── Bandages & gauze
   │  │  └── Kits & supplies
   │  ├── Hemorrhoid
   │  ├── Lip balm & treatments
   │  ├── Muscle & joint pain
   │  ├── Pain relievers
   │  ├── Sinus & allergy
   │  ├── Skin & scalp treatments
   │  ├── Sleep & snoring aids
   │  ├── Sleeves & braces
   │  ├── Smoking cessation
   │  ├── Thermometers & monitors
   │  └── Vaporizers
   ├── Nails
   │  ├── Manicure & pedicure tools
   │  ├── Nail & cuticle clippers
   │  ├── Nail files
   │  ├── Nail polish
   │  ├── Nail sets
   │  ├── Polish remover
   │  └── Treatments
   ├── Oral hygiene
   │  ├── Bite guards
   │  ├── Denture care
   │  ├── Floss
   │  ├── Mouthwash
   │  ├── Oral pain relief
   │  ├── Toothbrushes
   │  ├── Toothpaste
   │  └── Whiteners
   ├── Sexual wellness
   │  ├── Condoms & contraception
   │  ├── Lubricants
   │  └── Pregnancy & ovulation tests
   └── Vitamins & supplements
      ├── Antioxidants
      ├── Herbs & homeopathy
      ├── Minerals
      ├── Multivitamins
      └── Vitamins A-Z

9. Meat & seafood
   ├── Meat
   │  ├── Bacon
   │  ├── Beef
   │  ├── Bison
   │  ├── Chicken
   │  ├── Hot dogs
   │  ├── Lamb & goat
   │  ├── Pork
   │  ├── Sausage
   │  ├── Turkey
   │  └── Veal
   └── Seafood
      ├── Fish
      └── Shrimp & shellfish

10. Pantry
   ├── Baking ingredients
   │  ├── Baking chocolate & candies
   │  ├── Baking mixes
   │  ├── Baking soda & powder
   │  ├── Coconut flakes
   │  ├── Evaporated milk
   │  ├── Extracts
   │  ├── Flour
   │  ├── Food color
   │  ├── Icing & decorations
   │  ├── Pie crusts
   │  ├── Pie filling
   │  ├── Pudding & gelatin mix
   │  └── Yeast
   ├── Canned & dried food
   │  ├── Beans & legumes
   │  ├── Fruit
   │  │  ├── Apples
   │  │  ├── Bananas
   │  │  ├── Berries & cherries
   │  │  ├── Citrus
   │  │  ├── Mixed fruit
   │  │  ├── Peaches, plums, & apricots
   │  │  ├── Pears
   │  │  ├── Raisins
   │  │  └── Tropical & specialty
   │  ├── Meat
   │  ├── Seafood
   │  └── Vegetables
      │  ├── Artichokes & asparagus
      │  ├── Beets, carrots & potatoes
      │  ├── Cabbage & sauerkraut
      │  ├── Corn
      │  ├── Green beans & peas
      │  ├── Leafy greens
      │  ├── Mixed vegetables
      │  ├── Mushrooms
      │  ├── Olives
      │  ├── Onions & garlic
      │  ├── Peppers
      │  ├── Pickles & cucumber
      │  ├── Specialty & Asian
      │  └── Tomatoes
   ├── Cereal & breakfast
   │  ├── Cereal
   │  ├── Oatmeal & hot cereal
   │  ├── Pancake mixes
   │  ├── Syrup
   │  └── Toaster pastries
   ├── Condiments
   │  ├── Cocktail & tartar sauce
   │  ├── Horseradish & wasabi
   │  ├── Hot sauce
   │  ├── Ketchup
   │  ├── Mayonnaise & spreads
   │  ├── Mustard
   │  ├── Relish & chutney
   │  ├── Steak sauce
   │  └── Tapenade & bruschetta
   ├── Dressing, oil & vinegar
   │  ├── Oils
   │  ├── Salad dressings
   │  ├── Salad toppings
   │  └── Vinegar & cooking wine
   ├── Pasta & rice
   │  ├── Pasta
   │  └── Rice & grains
   ├── Sauces & marinades
   │  ├── Barbecue sauces
   │  ├── Cooking sauces
   │  ├── Glazes
   │  ├── Gravy
   │  ├── Marinades
   │  ├── Pasta sauces
   │  ├── Soy sauces
   │  └── Specialty sauces
   ├── Snacks & candy
   │  ├── Candy
   │  ├── Chips
   │  ├── Cookies
   │  ├── Crackers & breadsticks
   │  ├── Fruit snacks
   │  ├── Granola & snack bars
   │  ├── Gum & mints
   │  ├── Jerky
   │  ├── Nuts & seeds
   │  ├── Popcorn
   │  ├── Rice cakes
   │  ├── Snack cakes
   │  └── Trail mix
   ├── Spices & seasonings
   │  ├── Herbs & spices
   │  └── Spice mixes
   └── Sugar & sweeteners
      ├── Honey
      ├── Sugar
      └── Sugar substitutes

11. Pets
   ├── Birds
   │  ├── Feeders
   │  ├── Food
   │  └── Treats & toys
   ├── Cats
   │  ├── Food
   │  ├── Healthcare & grooming
   │  ├── Litter & litter boxes
   │  ├── Toys
   │  └── Treats
   └── Dogs
      ├── Cleanup & odor control
      ├── Flea & tick treatments
      ├── Food
      ├── Grooming
      ├── Healthcare
      ├── Toys
   │     ├── Balls & fetch toys
   │     ├── Chew toys
   │     ├── Plush toys
   │     └── Rope & tug toys
      └── Treats
         ├── Biscuits
         ├── Bones & rawhides
         ├── Dental treats
         ├── Jerky treats
         └── Soft & chewy treats
```

## Category Normalization

```
Retailer Categories          Goods Categories
───────────────────          ────────────────

HEB: "Fruit & vegetables > Fruit" ──────► "Fruit & vegetables > Fruit"
HEB: "Fruit & vegetables > Vegetables" ─► "Fruit & vegetables > Vegetables"
Walmart: "Fresh Fruits" ────────────────► "Fruit & vegetables > Fruit"
Walmart: "Fresh Vegetables" ────────────► "Fruit & vegetables > Vegetables"
Target: "Produce > Fresh Fruit" ────────► "Fruit & vegetables > Fruit"
Whole Foods: "Produce > Fresh Fruit" ───► "Fruit & vegetables > Fruit"
TJ's: "Fresh Fruits & Veggies > Fruits" ─► "Fruit & vegetables > Fruit"

HEB: "Meat & seafood > Meat" ───────────► "Meat & seafood > Meat"
HEB: "Meat & seafood > Seafood" ────────► "Meat & seafood > Seafood"
Walmart: "Beef & Lamb" ──────────────────► "Meat & seafood > Beef"
Costco: "Meat & Seafood > Beef" ─────────► "Meat & seafood > Beef"
```

## Implementation

### Walmart Category Mapping

Walmart uses subcategory-level mapping. Each Walmart subcategory maps to exactly one Goods category/subcategory. The complete mapping includes 144 subcategories mapped to Goods categories, with 52 subcategories excluded (alcohol, promotional categories, non-food items, etc.).

**Key Mapping Examples:**
- `Fresh Fruits` → `fruit_vegetables > fruit`
- `Beef & Lamb` → `meat_seafood > beef`
- `Ice Cream & Novelties` → `frozen_food > ice_cream_treats`
- `Chips` → `pantry > snacks_candy`
- `Coffee` → `beverages > coffee`

**Excluded Categories:**
- Alcohol (Beer, Wine, Spirits, etc.)
- Flowers
- Prepared meals & sides
- Promotional categories (Only at Walmart, EBT/SNAP eligible, etc.)
- Non-food items (Coffee Makers, Batteries, Gift cards, etc.)

See [Walmart documentation](/retailers/walmart.md#category-mapping) for the complete mapping table.

### Target Category Mapping

Target uses a nested category structure (parent category → subcategory). The complete mapping includes 232 subcategories mapped to Goods categories, with 92 subcategories excluded (alcohol, promotional categories, non-food items, etc.).

**Key Mapping Examples:**
- `Produce > Fresh Fruit` → `fruit_vegetables > fruit`
- `Meat & Seafood > Beef` → `meat_seafood > beef`
- `Frozen Foods > Ice Cream & Novelties` → `frozen_food > ice_cream_treats`
- `Snacks > Chips` → `pantry > snacks_candy`
- `Beverages > Coffee` → `beverages > coffee`

**Excluded Categories:**
- Alcohol (Wine, Beer, Liquor, and all subcategories)
- Fresh Flowers & Plants
- Bar & Wine Tools
- Food Gifts (duplicate categories)
- Emergency Food

**Note:** Baby Food is mapped to `pantry > baby_food` (a new strategic subcategory) for all baby food products.

See [Target documentation](/retailers/target.md#category-mapping) for more details.

### Python Implementation

```python
# Walmart category mapping
# Note: Category names use snake_case versions of Supabase category names
# All snacks map to Pantry > Snacks & candy in Supabase
WALMART_CATEGORY_MAP = {
    'Fresh Fruits': ('fruit_vegetables', 'fruit'),
    'Fresh Vegetables': ('fruit_vegetables', 'vegetables'),
    'Fresh Herbs': ('fruit_vegetables', None),  # No exact match in Supabase
    'Organic Produce': ('fruit_vegetables', 'specialty'),
    'Cut Fruits & Vegetables': ('fruit_vegetables', 'specialty'),
    'Salad Kits & Bowls': ('fruit_vegetables', 'vegetables'),
    'Fresh Dressings': ('pantry', 'condiments'),
    'Salsa & Dips': ('pantry', 'salsa_dip'),
    'Plant-based Protein & Tofu': ('meat_seafood', 'tofu_meat_alternatives'),
    'Beef & Lamb': ('meat_seafood', 'beef'),
    'Pork': ('meat_seafood', 'pork'),
    'Chicken': ('meat_seafood', 'poultry'),
    'Bacon, Hot Dogs, & Sausage': ('meat_seafood', 'pork'),
    'Organic and Plant-Based': ('meat_seafood', 'tofu_meat_alternatives'),
    'The Seafood Shop': ('meat_seafood', 'seafood'),
    'The Beef Shop': ('meat_seafood', 'beef'),
    'The Pork Shop': ('meat_seafood', 'pork'),
    'Deli Meat & Cheese': ('deli_prepared_food', 'cheese'),
    'Specialty Cheese and Charcuterie': ('deli_prepared_food', 'cheese'),
    'Rotisserie Chicken': ('meat_seafood', 'poultry'),
    'Hummus, Dips & Salsa': ('pantry', 'salsa_dip'),
    'Chips': ('pantry', 'snacks_candy'),
    'Crackers': ('pantry', 'snacks_candy'),
    'Cookies': ('pantry', 'snacks_candy'),
    'Fruit Snacks': ('pantry', 'snacks_candy'),
    'Popcorn': ('pantry', 'snacks_candy'),
    'Pretzels': ('pantry', 'snacks_candy'),
    'Salsas & Dips': ('pantry', 'salsa_dip'),
    'Canned Goods': ('pantry', 'canned_dried_food'),
    'Condiments': ('pantry', 'condiments'),
    'Pasta & Pizza': ('pantry', 'pasta_rice'),
    'Herbs, spices, seasonings': ('pantry', 'spices_seasonings'),
    'Soup': ('pantry', 'soups_chili'),
    'Rice, grains, dried beans': ('pantry', 'pasta_rice'),
    'Soda': ('beverages', 'soda'),
    'Water': ('beverages', 'water'),
    'Juices': ('beverages', 'juice'),
    'Sports Drinks': ('beverages', 'sports_energy_drinks'),
    'Kids Drinks & Juice Boxes': ('beverages', 'juice'),
    'Coffee': ('beverages', 'coffee'),
    'Tea': ('beverages', 'tea'),
    'Energy Drinks': ('beverages', 'sports_energy_drinks'),
    'Drink Mixes': ('beverages', 'mixes_flavor_enhancers'),
    'Bottled Tea': ('beverages', 'tea'),
    'Tea Bags': ('beverages', 'tea'),
    'Sweet Tea': ('beverages', 'tea'),
    'Iced Tea & Mixes': ('beverages', 'tea'),
    'Green Tea': ('beverages', 'tea'),
    'Herbal Tea': ('beverages', 'tea'),
    'Tea Lattes': ('beverages', 'tea'),
    'Decaf Tea': ('beverages', 'tea'),
    'Cold Brew Tea': ('beverages', 'tea'),
    'Loose Leaf Tea': ('beverages', 'tea'),
    'Black Tea': ('beverages', 'tea'),
    'Matcha Tea': ('beverages', 'tea'),
    'Tea K-Cups': ('beverages', 'tea'),
    'Boba Tea': ('beverages', 'tea'),
    'Digestion Tea': ('beverages', 'tea'),
    'Immunity Tea': ('beverages', 'tea'),
    'Energy Tea': ('beverages', 'tea'),
    'Detox Tea': ('beverages', 'tea'),
    'Relaxation': ('beverages', 'tea'),
    'Great Value Tea': ('beverages', 'tea'),
    'Ship to Home Coffee': ('beverages', 'coffee'),
    'K-Cups & Coffee Pods': ('beverages', 'coffee'),
    'Ground Coffee': ('beverages', 'coffee'),
    'Whole Bean Coffee': ('beverages', 'coffee'),
    'Instant Coffee': ('beverages', 'coffee'),
    'Bottled Coffee': ('beverages', 'coffee'),
    'Cold Brew Coffee': ('beverages', 'coffee'),
    'Espresso Pods': ('beverages', 'coffee'),
    'Great Value Coffee': ('beverages', 'coffee'),
    'Coffee Creamers': ('dairy_eggs', 'milk'),
    'Sugars & Sweetners': ('pantry', 'sugar_sweeteners'),
    'Flavored Syrups': ('pantry', 'condiments'),
    'Non Alcoholic Drinks': ('beverages', None),
    'Cereal & Granola': ('pantry', 'cereal_breakfast'),
    'Oatmeal & Grits': ('pantry', 'pasta_rice'),
    'Breakfast Breads': ('bakery_bread', 'bread'),
    'Toaster Pastries & Bars': ('pantry', 'cereal_breakfast'),
    'Pancakes & Waffles & Syrup': ('pantry', 'baking_ingredients'),
    'Muffins & Pastries': ('bakery_bread', 'desserts_pastries'),
    'Artisan Bread': ('bakery_bread', 'bread'),
    'Bread': ('bakery_bread', 'bread'),
    'Pastries': ('bakery_bread', 'desserts_pastries'),
    'Rolls': ('bakery_bread', 'bread'),
    'Buns': ('bakery_bread', 'bread'),
    'Bakery Cookies': ('pantry', 'snacks_candy'),
    'Brownies': ('bakery_bread', 'desserts_pastries'),
    'Bakery Sweets': ('bakery_bread', 'desserts_pastries'),
    'Pies': ('bakery_bread', 'desserts_pastries'),
    'Cakes': ('bakery_bread', 'cakes'),
    'Cupcakes': ('bakery_bread', 'desserts_pastries'),
    'Tortillas': ('bakery_bread', 'tortillas'),
    'Snack Cakes': ('bakery_bread', 'desserts_pastries'),
    'Cheese': ('dairy_eggs', 'cheese'),
    'Milk': ('dairy_eggs', 'milk'),
    'Cream & Creamers': ('dairy_eggs', 'cream'),
    'Yogurt': ('dairy_eggs', 'yogurt'),
    'Eggs': ('dairy_eggs', 'eggs_egg_substitutes'),
    'Butter & Margarine': ('dairy_eggs', 'butter_margarine'),
    'Sour Cream & Chilled Dips': ('dairy_eggs', 'sour_cream'),
    'Biscuits, Cookies, Doughs & Crusts': ('dairy_eggs', 'biscuit_cookie_dough'),
    'Pudding & Gelatin': ('dairy_eggs', 'pudding_gelatin'),
    'Ice Cream & Novelties': ('frozen_food', 'ice_cream_treats'),
    'The Ice Cream Shop': ('frozen_food', 'ice_cream_treats'),
    'Frozen Meals': ('frozen_food', 'meals_sides'),
    'Frozen Appetizers & Snacks': ('frozen_food', 'meals_sides'),
    'Frozen Produce': ('frozen_food', 'vegetables'),
    'Frozen Breakfast': ('frozen_food', 'meals_sides'),
    'Frozen Pizza': ('frozen_food', 'meals_sides'),
    'Frozen Desserts': ('frozen_food', 'ice_cream_treats'),
    'Frozen Meat, Seafood, & Vegetarian': ('frozen_food', 'meals_sides'),
    'Frozen Potatoes': ('frozen_food', 'vegetables'),
    'Chocolate': ('pantry', 'snacks_candy'),
    'Gummy & chewy candy': ('pantry', 'snacks_candy'),
    'Hard candy & lollipops': ('pantry', 'snacks_candy'),
    'Multipacks & bags': ('pantry', 'snacks_candy'),
    'Gum': ('pantry', 'snacks_candy'),
    'Mints': ('pantry', 'snacks_candy'),
    'Better for you': ('pantry', 'snacks_candy'),
    'Baking Mixes': ('pantry', 'baking_ingredients'),
    'Sugars & Sweeteners': ('pantry', 'sugar_sweeteners'),
    'Flours & Meals': ('pantry', 'baking_ingredients'),
    'Baking Soda & Starch': ('pantry', 'baking_ingredients'),
    'Oil & Shortening': ('pantry', 'baking_ingredients'),
    'Yeasts': ('pantry', 'baking_ingredients'),
    'Baking Nuts': ('pantry', 'baking_ingredients'),
    'Canned & Powdered Milks': ('pantry', 'baking_ingredients'),
    'Baking Chocolate Chips & Cocoa': ('pantry', 'baking_ingredients'),
    'Frosting & Decor': ('pantry', 'baking_ingredients'),
    'Extracts & Spices': ('pantry', 'spices_seasonings'),
    'Marshmallow': ('pantry', 'baking_ingredients'),
    'Top Baking Brands': ('pantry', 'baking_ingredients'),
}

# HEB category mapping (nested structure due to duplicate subcategory names)
# Note: Category names use snake_case versions of Supabase category names
HEB_CATEGORY_MAP = {
    'Fruit & vegetables': {
        'Fruit': ('fruit_vegetables', 'fruit'),
        'Vegetables': ('fruit_vegetables', 'vegetables'),
    },
    'Meat & seafood': {
        'Meat': ('meat_seafood', 'meat'),
        'Seafood': ('meat_seafood', 'seafood'),
        'Tofu & meat alternatives': ('meat_seafood', 'tofu_meat_alternatives'),
    },
    'Bakery & bread': {
        'Bread': ('bakery_bread', 'bread'),
        'Breading & crumbs': ('bakery_bread', 'breading_crumbs'),
        'Cookies': ('pantry', 'snacks_candy'),
        'Desserts & pastries': ('bakery_bread', 'desserts_pastries'),
        'Tortillas': ('bakery_bread', 'tortillas'),
        'Cakes': ('bakery_bread', 'cakes'),
    },
    'Dairy & eggs': {
        'Biscuit & cookie dough': ('dairy_eggs', 'biscuit_cookie_dough'),
        'Butter & margarine': ('dairy_eggs', 'butter_margarine'),
        'Cheese': ('dairy_eggs', 'cheese'),
        'Cottage cheese': ('dairy_eggs', 'cottage_cheese'),
        'Cream': ('dairy_eggs', 'cream'),
        'Eggs & egg substitutes': ('dairy_eggs', 'eggs_egg_substitutes'),
        'Milk': ('dairy_eggs', 'milk'),
        'Pudding & gelatin': ('dairy_eggs', 'pudding_gelatin'),
        'Sour cream': ('dairy_eggs', 'sour_cream'),
        'Yogurt': ('dairy_eggs', 'yogurt'),
    },
    'Deli & prepared food': {
        'Cheese': ('deli_prepared_food', 'cheese'),
        'Dip': ('deli_prepared_food', 'dip'),
        'Meat': ('deli_prepared_food', 'meat'),
    },
    'Pantry': {
        'Baking ingredients': ('pantry', 'baking_ingredients'),
        'Broth & bouillon': ('pantry', 'broth_bouillon'),
        'Canned & dried food': ('pantry', 'canned_dried_food'),
        'Cereal & breakfast': ('pantry', 'cereal_breakfast'),
        'Condiments': ('pantry', 'condiments'),
        'Dressing, oil & vinegar': ('pantry', 'dressing_oil_vinegar'),
        'Jelly & jam': ('pantry', 'jelly_jam'),
        'Pasta & rice': ('pantry', 'pasta_rice'),
        'Peanut butter': ('pantry', 'peanut_butter'),
        'Salsa & dip': ('pantry', 'salsa_dip'),
        'Sauces & marinades': ('pantry', 'sauces_marinades'),
        'Snacks & candy': ('pantry', 'snacks_candy'),
        'Soups & chili': ('pantry', 'soups_chili'),
        'Spices & seasonings': ('pantry', 'spices_seasonings'),
        'Sugar & sweeteners': ('pantry', 'sugar_sweeteners'),
    },
    'Frozen food': {
        'Bread & baked goods': ('frozen_food', 'bread_baked_goods'),
        'Fruit': ('frozen_food', 'fruit'),
        'Ice cream & treats': ('frozen_food', 'ice_cream_treats'),
        'Juice & smoothies': ('frozen_food', 'juice_smoothies'),
        'Meals & sides': ('frozen_food', 'meals_sides'),
        'Meat': ('frozen_food', 'meat'),
        'Meat alternatives': ('frozen_food', 'meat_alternatives'),
        'Seafood': ('frozen_food', 'seafood'),
        'Vegetables': ('frozen_food', 'vegetables'),
    },
    'Beverages': {
        'Cocoa': ('beverages', 'cocoa'),
        'Coconut water': ('beverages', 'coconut_water'),
        'Coffee': ('beverages', 'coffee'),
        'Coffee creamer': ('beverages', 'coffee_creamer'),
        'Ice': ('beverages', 'ice'),
        'Juice': ('beverages', 'juice'),
        'Mixes & flavor enhancers': ('beverages', 'mixes_flavor_enhancers'),
        'Shakes & smoothies': ('beverages', 'shakes_smoothies'),
        'Soda': ('beverages', 'soda'),
        'Sports & energy drinks': ('beverages', 'sports_energy_drinks'),
        'Tea': ('beverages', 'tea'),
        'Water': ('beverages', 'water'),
    },
    'Everyday essentials': {
        'Cleaners': ('everyday_essentials', 'cleaners'),
        'Cleaning tools': ('everyday_essentials', 'cleaning_tools'),
        'Facial tissue': ('everyday_essentials', 'facial_tissue'),
        'Laundry': ('everyday_essentials', 'laundry'),
        'Paper towels': ('everyday_essentials', 'paper_towels'),
        'Toilet paper': ('everyday_essentials', 'toilet_paper'),
        'Trash bags': ('everyday_essentials', 'trash_bags'),
    },
    'Health & beauty': {
        'Bath & skin care': ('health_beauty', 'bath_skin_care'),
        'Hair care': ('health_beauty', 'hair_care'),
        'Makeup': ('health_beauty', 'makeup'),
        'Nails': ('health_beauty', 'nails'),
        'Cotton balls & swabs': ('health_beauty', 'cotton_balls_swabs'),
        'Diet & fitness': ('health_beauty', 'diet_fitness'),
        'Eye & ear care': ('health_beauty', 'eye_ear_care'),
        'Feminine care': ('health_beauty', 'feminine_care'),
        'Foot care': ('health_beauty', 'foot_care'),
        'Home health care': ('health_beauty', 'home_health_care'),
        'Incontinence': ('health_beauty', 'incontinence'),
        'Oral hygiene': ('health_beauty', 'oral_hygiene'),
        'Vitamins & supplements': ('health_beauty', 'vitamins_supplements'),
    },
}

# Central Market category mapping (nested structure)
# Note: Category names use snake_case versions of Supabase category names
CENTRALMARKET_CATEGORY_MAP = {
    'Fruits & Vegetables': {
        'Fruit': ('fruit_vegetables', 'fruit'),
        'Vegetables': ('fruit_vegetables', 'vegetables'),
    },
    'Meat & Poultry': {
        'In-House Sausage': ('meat_seafood', 'pork'),
        'Meat': ('meat_seafood', 'meat'),
        'Poultry': ('meat_seafood', 'poultry'),
        'Smoked Meats': ('meat_seafood', 'meat'),
    },
    'Seafood': {
        'Shellfish': ('meat_seafood', 'seafood'),
        'Fish': ('meat_seafood', 'seafood'),
    },
    'Grocery & Staples': {
        'Baking': ('pantry', 'baking_ingredients'),
        'Coffee, Tea, & Hot Cocoa': ('beverages', 'coffee'),
        'Nut Butters': ('pantry', 'peanut_butter'),
        'Sauces, Marinades, & Condiments': ('pantry', 'sauces_marinades'),
        'Asian': ('pantry', 'international'),
        'Chips & Salty Snacks': ('pantry', 'snacks_candy'),
        'Cookies & Sweet Snacks': ('pantry', 'snacks_candy'),
        'Crackers & Crisps': ('pantry', 'snacks_candy'),
        'Nuts, Seeds, & Dried Fruit': ('pantry', 'snacks_candy'),
        'Chocolate & Candy': ('pantry', 'snacks_candy'),
        'Herbs & Spices': ('pantry', 'spices_seasonings'),
        'Salsa & Dips': ('pantry', 'salsa_dip'),
        'Bread': ('bakery_bread', 'bread'),
        'Breakfast & Cereal': ('pantry', 'cereal_breakfast'),
        'Canned Goods': ('pantry', 'canned_dried_food'),
        'Fruit Spreads & Honey': ('pantry', 'jelly_jam'),
        'Oil & Vinegar': ('pantry', 'dressing_oil_vinegar'),
        'Pasta & Sauce': ('pantry', 'pasta_rice'),
        'Packaged Meals & Sides': ('deli_prepared_food', 'ready_meals_snacks'),
        'Rice, Beans, & Grains': ('pantry', 'pasta_rice'),
        'Salad Dressing & Toppings': ('pantry', 'dressing_oil_vinegar'),
        'Soups & Chili': ('pantry', 'soups_chili'),
        'Stocks & Broth': ('pantry', 'broth_bouillon'),
    },
    'Bulk Foods': {
        'Baking & Spices': ('pantry', 'baking_ingredients'),
        'Chocolate & Candy': ('pantry', 'snacks_candy'),
        'Coffee Beans & Loose-Leaf Tea': ('beverages', 'coffee'),
        'Granola & Oats': ('pantry', 'cereal_breakfast'),
        'Nuts, Seeds, & Dried Fruit': ('pantry', 'snacks_candy'),
        'Rice, Beans, & Grains': ('pantry', 'pasta_rice'),
    },
    'Dairy & Eggs': {
        'Eggs': ('dairy_eggs', 'eggs_egg_substitutes'),
        'Milk & Cream': ('dairy_eggs', 'milk'),
        'Yogurt': ('dairy_eggs', 'yogurt'),
        'Packaged Cheese': ('dairy_eggs', 'cheese'),
        'Butter': ('dairy_eggs', 'butter_margarine'),
        'Tofu & Meat Alternatives': ('meat_seafood', 'tofu_meat_alternatives'),
    },
    'Chef Prepared': {
        'Dips, Salsas, & Spreads': ('deli_prepared_food', 'dip'),
        'Breakfast & Quiche': ('deli_prepared_food', 'ready_meals_snacks'),
        'Casseroles & Pot Pies': ('deli_prepared_food', 'ready_meals_snacks'),
        'Dinner For One': ('deli_prepared_food', 'ready_meals_snacks'),
        'Mains & Sides': ('deli_prepared_food', 'ready_meals_snacks'),
        'Rotisserie': ('meat_seafood', 'poultry'),
        'Salads & Dressings': ('fruit_vegetables', 'vegetables'),
        'Sandwiches & Wraps': ('deli_prepared_food', 'ready_meals_snacks'),
        'Snack Packs & Lunch Kits': ('deli_prepared_food', 'ready_meals_snacks'),
        'Soups & Chili': ('pantry', 'soups_chili'),
        'Sushi': ('meat_seafood', 'seafood'),
    },
    'Deli': {
        'Deli Meats': ('deli_prepared_food', 'meat'),
        'Fresh Pasta & Sauce': ('pantry', 'pasta_rice'),
    },
    'Cheese': {
        'Cheese Shop': ('dairy_eggs', 'cheese'),
        'Packaged Cheese': ('dairy_eggs', 'cheese'),
    },
    'Bakery': {
        'Breakfast': ('bakery_bread', 'desserts_pastries'),
        'Bread & Rolls': ('bakery_bread', 'bread'),
        'Sweets & Desserts': ('bakery_bread', 'desserts_pastries'),
        'Tortillas': ('bakery_bread', 'tortillas'),
    },
    'Frozen': {
        'Bread': ('frozen_food', 'bread_baked_goods'),
        'Breakfast': ('frozen_food', 'meals_sides'),
        'Fruit & Vegetables': ('frozen_food', 'vegetables'),
        'Ice Cream & Novelties': ('frozen_food', 'ice_cream_treats'),
        'Pizza': ('frozen_food', 'meals_sides'),
        'Appetizers & Snacks': ('frozen_food', 'meals_sides'),
        'Entrées & Sides': ('frozen_food', 'meals_sides'),
        'Soup & Broth': ('pantry', 'broth_bouillon'),
        'Sweets & Baking': ('frozen_food', 'bread_baked_goods'),
    },
    'Healthy Living': {
        'Diet & Nutrition': ('health_beauty', 'diet_fitness'),
        'Personal Care': ('health_beauty', 'bath_skin_care'),
        'Vitamins & Supplements': ('health_beauty', 'vitamins_supplements'),
    },
    'Beverages': {
        'Cold Brew & Iced Coffee': ('beverages', 'coffee'),
        'Juice & Fruit Drinks': ('beverages', 'juice'),
        'Soda': ('beverages', 'soda'),
        'Sparkling Water & Seltzer': ('beverages', 'water'),
        'Water': ('beverages', 'water'),
    },
    'Household': {
        'Pet': ('pets', 'dogs'),
        'Household Essentials': ('everyday_essentials', 'cleaners'),
    },
    'Kids & Baby': {
        'Pouches & Snacks': ('pantry', 'snacks_candy'),
        'Diapers & Wipes': ('baby_kids', 'diapers_potty'),
        'Bottles & Formula': ('baby_kids', 'food_formula'),
    }
}

# Unified category mapping for all retailers
# Note: Category names use snake_case versions of Supabase category names
COSTCO_CATEGORY_MAP = {
    'Produce': {
        'Fresh Fruits': ('fruit_vegetables', 'fruit'),
        'Fresh Vegetables': ('fruit_vegetables', 'vegetables'),
    },
    'Meat & Seafood': {
        'Beef': ('meat_seafood', 'beef'),
        'Pork': ('meat_seafood', 'pork'),
        'Lamb': ('meat_seafood', 'other_meat'),
        'Seafood': ('meat_seafood', 'seafood'),
    },
    'Poultry': {
        'Chicken': ('meat_seafood', 'poultry'),
        'Turkey': ('meat_seafood', 'poultry'),
        'Duck': ('meat_seafood', 'poultry'),
    },
    'Deli': {
        'Deli Meat': ('deli_prepared_food', 'meat'),
        'Hot Dogs, Bacon & Sausage': ('meat_seafood', 'pork'),
        'Prosciutto, Smoked & Cured Meats': ('deli_prepared_food', 'meat'),
        'Caviar': ('meat_seafood', 'seafood'),
        'Dips & Spreads': ('deli_prepared_food', 'dip'),
    },
    'Cheese & Dairy': {
        'Cheese': ('dairy_eggs', 'cheese'),
        'Butter': ('dairy_eggs', 'butter_margarine'),
        'Yogurt': ('dairy_eggs', 'yogurt'),
    },
    'Beverages & Water': {
        'Milk & Milk Substitutes': ('dairy_eggs', 'milk'),
        'Water': ('beverages', 'water'),
        'Juice': ('beverages', 'juice'),
        'Fresh Juice & Cold Drinks': ('beverages', 'juice'),
        'Soda, Pop & Soft Drinks': ('beverages', 'soda'),
        'Sports & Energy Drinks': ('beverages', 'sports_energy_drinks'),
        'Tea': ('beverages', 'tea'),
        'Powdered Drink Mix': ('beverages', 'mixes_flavor_enhancers'),
    },
    'Bakery & Desserts': {
        'Tortillas & Flatbreads': ('bakery_bread', 'tortillas'),
    },
    'Frozen Foods': {
        'Frozen Meals': ('frozen_food', 'meals_sides'),
        'Appetizers & Side Dishes': ('frozen_food', 'meals_sides'),
        'Frozen Meat & Seafood': ('frozen_food', 'meat'),
        'Ice Cream & Frozen Desserts': ('frozen_food', 'ice_cream_treats'),
    },
    'Pantry & Dry Goods': {
        'Pasta, Rice & Grains': ('pantry', 'pasta_rice'),
        'Soup, Bouillon & Broth': ('pantry', 'broth_bouillon'),
        'Sauces, Condiments & Marinades': ('pantry', 'sauces_marinades'),
        'Nut Butters, Jelly & Jam': ('pantry', 'peanut_butter'),
        'Honey': ('pantry', 'jelly_jam'),
        'Vinegar & Cooking Oil': ('pantry', 'dressing_oil_vinegar'),
        'Spices, Seasonings & Dried Herbs': ('pantry', 'spices_seasonings'),
        'Flour & Baking Supplies': ('pantry', 'baking_ingredients'),
        'Sugar, Syrup & Sweeteners': ('pantry', 'sugar_sweeteners'),
    },
    'Canned Goods': {
        'Canned Meats': ('pantry', 'canned_dried_food'),
    },
    'Coffee': {
        'Ground Coffee': ('beverages', 'coffee'),
        'Whole Bean Coffee': ('beverages', 'coffee'),
        'Instant Coffee': ('beverages', 'coffee'),
        'K-Cups, Coffee Pods & Capsules': ('beverages', 'coffee'),
        'Coffee Creamers': ('beverages', 'coffee_creamer'),
    },
    'Snacks': {
        'Chips & Pretzels': ('pantry', 'snacks_candy'),
        'Crackers': ('pantry', 'snacks_candy'),
        'Cookies': ('pantry', 'snacks_candy'),
        'Popcorn': ('pantry', 'snacks_candy'),
        'Pastries & Muffins': ('bakery_bread', 'desserts_pastries'),
    },
    'Candy': {
        'Chocolates': ('pantry', 'snacks_candy'),
        'Hard & Gummy Candy': ('pantry', 'snacks_candy'),
        'Gum & Mints': ('pantry', 'snacks_candy'),
    },
    'Cleaning Supplies': {
        'Cleaning Tools': ('everyday_essentials', 'cleaning_tools'),
        'Dish Soap & Dishwasher Detergent': ('everyday_essentials', 'cleaners'),
        'Laundry Detergent & Supplies': ('everyday_essentials', 'laundry'),
        'Trash Bags': ('everyday_essentials', 'trash_bags'),
    },
    'Paper & Plastic Products': {
        'Paper Towels & Napkins': ('everyday_essentials', 'paper_towels'),
        'Toilet Paper': ('everyday_essentials', 'toilet_paper'),
        'Facial Tissue': ('everyday_essentials', 'facial_tissue'),
        'Food Storage Bags': ('everyday_essentials', 'food_storage_wraps'),
        'Parchment Paper, Plastic Wrap & Aluminum Foil': ('everyday_essentials', 'food_storage_wraps'),
    },
    'Pet Supplies': {
        'Dog Food': ('pets', 'dogs'),
        'Cat Food': ('pets', 'cats'),
    },
}

TRADERJOES_CATEGORY_MAP = {
    'Fresh Fruits & Veggies': {
        'Fruits': ('fruit_vegetables', 'fruit'),
        'Veggies': ('fruit_vegetables', 'vegetables'),
    },
    'Meat, Seafood & Plant-based': {
        'Beef, Pork & Lamb': ('meat_seafood', 'meat'),
        'Chicken & Turkey': ('meat_seafood', 'poultry'),
        'Fish & Seafood': ('meat_seafood', 'seafood'),
        'Plant-based Protein': ('meat_seafood', 'tofu_meat_alternatives'),
    },
    'Dairy & Eggs': {
        'Milk & Cream': ('dairy_eggs', 'milk'),
        'Butter': ('dairy_eggs', 'butter_margarine'),
        'Yogurt, etc.': ('dairy_eggs', 'yogurt'),
        'Eggs': ('dairy_eggs', 'eggs_egg_substitutes'),
    },
    'Cheese': {
        'Slices, Shreds, Crumbles': ('dairy_eggs', 'cheese'),
        'Wedges, Wheels, Loaves, Logs': ('dairy_eggs', 'cheese'),
        'Cream and Creamy Cheeses': ('dairy_eggs', 'cheese'),
    },
    'Bakery': {
        'Sliced Bread': ('bakery_bread', 'bread'),
        'Loaves, Rolls, Buns': ('bakery_bread', 'bread'),
        'Bagels': ('bakery_bread', 'bread'),
        'Tortillas & Flatbreads': ('bakery_bread', 'tortillas'),
        'Sweet Stuff': ('bakery_bread', 'desserts_pastries'),
    },
    'From The Freezer': {
        'Appetizers': ('frozen_food', 'meals_sides'),
        'Entrées & Sides': ('frozen_food', 'meals_sides'),
        'Fruit & Vegetables': ('frozen_food', 'vegetables'),
        'Cool Desserts': ('frozen_food', 'ice_cream_treats'),
    },
    'For the Pantry': {
        'Pastas & Grains': ('pantry', 'pasta_rice'),
        'Packaged Fish, Meat, Fruit & Veg': ('pantry', 'canned_dried_food'),
        'Nut Butters & Fruit Spreads': ('pantry', 'peanut_butter'),
        'Oils & Vinegars': ('pantry', 'dressing_oil_vinegar'),
        'For Baking & Cooking': ('pantry', 'baking_ingredients'),
        'Spices': ('pantry', 'spices_seasonings'),
        'Soup, Chili & Meals': ('pantry', 'soups_chili'),
        'Honeys, Syrups & Nectars': ('pantry', 'jelly_jam'),
    },
    'Dips, Sauces & Dressings': {
        'Condiments': ('pantry', 'condiments'),
        'BBQ, Pasta, Simmer': ('pantry', 'sauces_marinades'),
        'Salsa & Hot Sauce': ('pantry', 'salsa_dip'),
        'Dip/Spread': ('pantry', 'salsa_dip'),
        'Dressing & Seasoning': ('pantry', 'dressing_oil_vinegar'),
    },
    'Snacks & Sweets': {
        'Chips, Crackers & Crunchy Bites': ('pantry', 'snacks_candy'),
        'Candies & Cookies': ('pantry', 'snacks_candy'),
    },
    'Beverages': {
        'Juices & More': ('beverages', 'juice'),
        'Water (Sparkling & Still)': ('beverages', 'water'),
        'Coffee & Tea': ('beverages', 'coffee'),
        'Sodas & Mixers': ('beverages', 'soda'),
    },
    'Everything Else': {
        'Household Essentials': ('everyday_essentials', 'cleaners'),
        'For the Face & Body': ('health_beauty', 'bath_skin_care'),
        'Pet Stuff': ('pets', 'dogs'),
        'Nutritional Supplements': ('health_beauty', 'vitamins_supplements'),
    },
}

# Whole Foods category mapping (nested structure)
# Note: Category names use snake_case versions of Supabase category names
WHOLEFOODS_CATEGORY_MAP = {
    'Produce': {
        'Fresh Vegetables': ('fruit_vegetables', 'vegetables'),
        'Fresh Fruit': ('fruit_vegetables', 'fruit'),
        'Packaged Produce': ('fruit_vegetables', 'specialty'),
        'Dried Fruits &Vegetables': ('pantry', 'snacks_candy'),
        'Herbs &Spices': ('pantry', 'spices_seasonings'),
        'Nuts &Seeds': ('pantry', 'snacks_candy'),
        'Tofu &Plant-Based Proteins': ('meat_seafood', 'tofu_meat_alternatives'),
    },
    'Meat & Seafood': {
        'Beef': ('meat_seafood', 'beef'),
        'Turkey': ('meat_seafood', 'poultry'),
        'Wild Game': ('meat_seafood', 'other_meat'),
        'Lamb': ('meat_seafood', 'other_meat'),
        'Seafood': ('meat_seafood', 'seafood'),
        'Packaged Cured & Deli Meats': ('deli_prepared_food', 'meat'),
        'Frozen Meats': ('frozen_food', 'meat'),
        'Sliced Deli Meats': ('deli_prepared_food', 'meat'),
        'Frozen Seafood': ('frozen_food', 'seafood'),
        'Sausage': ('meat_seafood', 'pork'),
        'Chicken': ('meat_seafood', 'poultry'),
        'Meat Alternatives': ('meat_seafood', 'tofu_meat_alternatives'),
        'Hot Dogs & Franks': ('meat_seafood', 'pork'),
        'Pork': ('meat_seafood', 'pork'),
        'Bacon': ('meat_seafood', 'pork'),
    },
    'Breads & Bakery': {
        'Breads': ('bakery_bread', 'bread'),
        'Cakes': ('bakery_bread', 'cakes'),
        'Pastries &Breakfast': ('bakery_bread', 'desserts_pastries'),
        'Cookies': ('pantry', 'snacks_candy'),
        'Desserts': ('bakery_bread', 'desserts_pastries'),
        'Bread Crumbs &Stuffing': ('bakery_bread', 'breading_crumbs'),
        'Breadsticks': ('pantry', 'snacks_candy'),
    },
    'Deli & Prepared Foods': {
        'Entrées': ('deli_prepared_food', 'ready_meals_snacks'),
        'Deli Meats &Cheeses': ('deli_prepared_food', 'cheese'),
        'Deli Salads': ('fruit_vegetables', 'vegetables'),
        'Soups, Stews &Chili': ('pantry', 'soups_chili'),
        'Dips, Salsas &Spreads': ('deli_prepared_food', 'dip'),
        'Appetizers': ('deli_prepared_food', 'ready_meals_snacks'),
        'Pasta &Sauces': ('pantry', 'pasta_rice'),
        'Sandwiches &Wraps': ('deli_prepared_food', 'ready_meals_snacks'),
        'Sides': ('deli_prepared_food', 'ready_meals_snacks'),
        'Casseroles, Potpies &Quiches': ('deli_prepared_food', 'ready_meals_snacks'),
        'Breakfast': ('deli_prepared_food', 'ready_meals_snacks'),
        'Sushi': ('meat_seafood', 'seafood'),
        'Meal Kits': ('deli_prepared_food', 'meal_kits'),
    },
    'Dairy, Cheese & Eggs': {
        'Cheese': ('dairy_eggs', 'cheese'),
        'Eggs &Egg Substitutes': ('dairy_eggs', 'eggs_egg_substitutes'),
        'Milk &Cream': ('dairy_eggs', 'milk'),
        'Yogurt': ('dairy_eggs', 'yogurt'),
        'Butter &Margarine': ('dairy_eggs', 'butter_margarine'),
        'Sour Creams': ('dairy_eggs', 'sour_cream'),
        'Cottage Cheese': ('dairy_eggs', 'cottage_cheese'),
        'Cream Cheese': ('dairy_eggs', 'cheese'),
        'Milk Alternatives': ('dairy_eggs', 'milk'),
        'Whipped Toppings': ('dairy_eggs', 'cream'),
    },
    'Frozen Foods': {
        'Meals &Entrées': ('frozen_food', 'meals_sides'),
        'Vegetables': ('frozen_food', 'vegetables'),
        'Pizza': ('frozen_food', 'meals_sides'),
        'Fruit': ('frozen_food', 'fruit'),
        'Ice Cream &Novelties': ('frozen_food', 'ice_cream_treats'),
        'Breakfast Foods': ('frozen_food', 'meals_sides'),
        'Frozen Meats': ('frozen_food', 'meat'),
        'Bread &Dough': ('frozen_food', 'bread_baked_goods'),
        'Desserts &Toppings': ('frozen_food', 'ice_cream_treats'),
    },
    'Snacks, Chips, Salsas & Dips': {
        'Chips &Crisps': ('pantry', 'snacks_candy'),
        'Chips &Crackers': ('pantry', 'snacks_candy'),
        'Popcorn': ('pantry', 'snacks_candy'),
        'Bars': ('pantry', 'snacks_candy'),
        'Salsas, Dips &Spreads': ('pantry', 'salsa_dip'),
        'Puffed Snacks': ('pantry', 'snacks_candy'),
        'Nuts &Seeds': ('pantry', 'snacks_candy'),
        'Cookies': ('pantry', 'snacks_candy'),
        'Dried Fruit &Raisins': ('pantry', 'snacks_candy'),
        'Pretzels': ('pantry', 'snacks_candy'),
        'Snack &Trail Mixes': ('pantry', 'snacks_candy'),
        'Crackers': ('pantry', 'snacks_candy'),
        'Meat Snacks': ('pantry', 'snacks_candy'),
        'Candy &Chocolate': ('pantry', 'snacks_candy'),
        'Fruit Snacks': ('pantry', 'snacks_candy'),
        'Applesauce &Fruit Cups': ('pantry', 'snacks_candy'),
        'Snack Cakes &Pastries': ('pantry', 'snacks_candy'),
        'Seaweed Snacks': ('pantry', 'snacks_candy'),
        'Party Mix': ('pantry', 'snacks_candy'),
        'Puddings &Gelatins': ('dairy_eggs', 'pudding_gelatin'),
        'Fruit Leathers': ('pantry', 'snacks_candy'),
        'Vegetable Snacks': ('pantry', 'snacks_candy'),
        'Ice Cream Cones &Toppings': ('frozen_food', 'ice_cream_treats'),
        'Breadsticks': ('pantry', 'snacks_candy'),
    },
    'Pantry Essentials': {
        'Pasta &Noodles': ('pantry', 'pasta_rice'),
        'Condiments &Salad Dressings': ('pantry', 'condiments'),
        'Canned, Jarred &Packaged Foods': ('pantry', 'canned_dried_food'),
        'Cereal &Granola': ('pantry', 'cereal_breakfast'),
        'Jams, Jellies &Sweet Spreads': ('pantry', 'jelly_jam'),
        'Spices &Seasonings': ('pantry', 'spices_seasonings'),
        'Grains &Rice': ('pantry', 'pasta_rice'),
        'Soups, Stocks &Broths': ('pantry', 'broth_bouillon'),
        'Sauces, Gravies &Marinades': ('pantry', 'sauces_marinades'),
        'Cooking &Baking': ('pantry', 'baking_ingredients'),
        'Nut &Seed Butters': ('pantry', 'peanut_butter'),
        'Olives, Pickles &Relishes': ('pantry', 'condiments'),
        'Beans, Lentils &Peas': ('pantry', 'pasta_rice'),
    },
    'Beverages': {
        'Juices': ('beverages', 'juice'),
        'Soft Drinks': ('beverages', 'soda'),
        'Water': ('beverages', 'water'),
        'Coffee': ('beverages', 'coffee'),
        'Tea': ('beverages', 'tea'),
        'Sparkling Water': ('beverages', 'water'),
        'Sports Drinks': ('beverages', 'sports_energy_drinks'),
    },
    'Beauty': {
        'Bath &Body': ('health_beauty', 'bath_skin_care'),
        'Oral Care': ('health_beauty', 'oral_hygiene'),
        'Hair Care': ('health_beauty', 'hair_care'),
        'Deodorants &Shave': ('health_beauty', 'bath_skin_care'),
        'Skin Care': ('health_beauty', 'bath_skin_care'),
        'Hand Soap &Sanitizers': ('everyday_essentials', 'cleaners'),
        'First Aid': ('health_beauty', 'medicines_treatments'),
        'Makeup &Fragrances': ('health_beauty', 'makeup'),
        "Women 's Care": ('health_beauty', 'feminine_care'),
        'Baby &Child Care': ('baby_kids', 'health_skin_care'),
    },
    'Household': {
        'Paper &Plastic': ('everyday_essentials', 'paper_towels'),
        'Cleaning Supplies': ('everyday_essentials', 'cleaners'),
        'Laundry': ('everyday_essentials', 'laundry'),
        'Dishwashing': ('everyday_essentials', 'cleaners'),
        'Kids &Baby Essentials': ('baby_kids', 'diapers_potty'),
        'Pet Supplies': ('pets', 'dogs'),
    },
    'Vitamins & Supplements': {
        'A-Z Vitamins and Supplements': ('health_beauty', 'vitamins_supplements'),
        'Sleep': ('health_beauty', 'vitamins_supplements'),
        'Vitamin C': ('health_beauty', 'vitamins_supplements'),
        'Protein &Sports Nutrition': ('health_beauty', 'vitamins_supplements'),
        'Brain &Memory': ('health_beauty', 'vitamins_supplements'),
        'Multivitamins': ('health_beauty', 'vitamins_supplements'),
        'Immunity': ('health_beauty', 'vitamins_supplements'),
        "Women 's Supplements": ('health_beauty', 'vitamins_supplements'),
        'Beauty &Collagen': ('health_beauty', 'vitamins_supplements'),
        "Children 's Vitamins &Supplements": ('health_beauty', 'vitamins_supplements'),
        'Vitamin D': ('health_beauty', 'vitamins_supplements'),
        'Vitamin B': ('health_beauty', 'vitamins_supplements'),
        'Probiotics &Gut': ('health_beauty', 'vitamins_supplements'),
        'Energy &Mood': ('health_beauty', 'vitamins_supplements'),
        'Heart': ('health_beauty', 'vitamins_supplements'),
        'Herbs &Mushrooms': ('health_beauty', 'vitamins_supplements'),
        'Superfoods, Greens &Seeds': ('health_beauty', 'vitamins_supplements'),
        'Vitamin E': ('health_beauty', 'vitamins_supplements'),
    }
}

# Target category mapping (nested structure)
# Note: Category names use snake_case versions of Supabase category names
TARGET_CATEGORY_MAP = {
    'Baby Food': {
        'Baby Food': ('pantry', 'baby_food'),
    },
    'Bakery & Bread': {
        'Bagels': ('bakery_bread', 'bread'),
        'Breads': ('bakery_bread', 'bread'),
        'Cakes & Pies': ('bakery_bread', 'desserts_pastries'),
        'Cookies & Bars': ('pantry', 'snacks_candy'),
        'Donuts & Pastries': ('bakery_bread', 'desserts_pastries'),
        'Muffins': ('bakery_bread', 'desserts_pastries'),
        'Pizza Crusts': ('bakery_bread', 'bread'),
        'Refrigerated Doughs': ('dairy_eggs', 'biscuit_cookie_dough'),
        'Rolls & Buns': ('bakery_bread', 'bread'),
        'Snack Cakes': ('bakery_bread', 'desserts_pastries'),
        'Tortillas, Pitas & Wraps': ('bakery_bread', 'tortillas'),
    },
    'Beverages': {
        'Cocoa': ('beverages', 'cocoa'),
        'Coffee': ('beverages', 'coffee'),
        'Coffee Creamers': ('beverages', 'coffee_creamer'),
        'Cold Brew & Bottled Coffee': ('beverages', 'coffee'),
        'Drink Mixes': ('beverages', 'mixes_flavor_enhancers'),
        'Energy Drinks': ('beverages', 'sports_energy_drinks'),
        'Espresso': ('beverages', 'coffee'),
        'Ground Coffee': ('beverages', 'coffee'),
        'Hard Cider': ('beverages', 'juice'),
        'Instant Coffee': ('beverages', 'coffee'),
        'Juice & Cider': ('beverages', 'juice'),
        'K-Cups & Coffee Pods': ('beverages', 'coffee'),
        'Meal Replacement Drinks': ('beverages', 'shakes_smoothies'),
        'Milk': ('dairy_eggs', 'milk'),
        'Milk Substitutes': ('dairy_eggs', 'milk'),
        'Non-Alcoholic Drinks': ('beverages', 'soda'),
        'Protein Powders': ('beverages', 'shakes_smoothies'),
        'Soda & Pop': ('beverages', 'soda'),
        'Sports Drinks': ('beverages', 'sports_energy_drinks'),
        'Tea': ('beverages', 'tea'),
        'Water': ('beverages', 'water'),
        'Whole Bean Coffee': ('beverages', 'coffee'),
    },
    'Breakfast & Cereal': {
        'Cereal': ('pantry', 'cereal_breakfast'),
        'Granola': ('pantry', 'cereal_breakfast'),
        'Oatmeal': ('pantry', 'cereal_breakfast'),
        'Pancake Mixes, Waffle Mixes & Syrup': ('pantry', 'baking_ingredients'),
        'Toaster Pastries & Breakfast Bars': ('pantry', 'cereal_breakfast'),
    },
    'Candy': {
        'Chocolate Candy': ('pantry', 'snacks_candy'),
        'Christmas Candy & Treats': ('pantry', 'snacks_candy'),
        'Freeze Dried Candy': ('pantry', 'snacks_candy'),
        'Gum & Mints': ('pantry', 'snacks_candy'),
        'Gummy & Chewy Candy': ('pantry', 'snacks_candy'),
        'Hard Candy': ('pantry', 'snacks_candy'),
        'Sour Candy': ('pantry', 'snacks_candy'),
    },
    'Coffee': {
        'Coffee Creamers': ('beverages', 'coffee_creamer'),
        'Cold Brew & Bottled Coffee': ('beverages', 'coffee'),
        'Espresso': ('beverages', 'coffee'),
        'Ground Coffee': ('beverages', 'coffee'),
        'Instant Coffee': ('beverages', 'coffee'),
        'K-Cups & Coffee Pods': ('beverages', 'coffee'),
        'Whole Bean Coffee': ('beverages', 'coffee'),
    },
    'Dairy': {
        'Butter & Margarine': ('dairy_eggs', 'butter_margarine'),
        'Cheese': ('dairy_eggs', 'cheese'),
        'Coffee Creamers': ('beverages', 'coffee_creamer'),
        'Cottage Cheese': ('dairy_eggs', 'cottage_cheese'),
        'Cream & Whipped Toppings': ('dairy_eggs', 'cream'),
        'Cream Cheese': ('dairy_eggs', 'cheese'),
        'Desserts & Puddings': ('dairy_eggs', 'pudding_gelatin'),
        'Eggs': ('dairy_eggs', 'eggs_egg_substitutes'),
        'Milk': ('dairy_eggs', 'milk'),
        'Milk Substitutes': ('dairy_eggs', 'milk'),
        'Refrigerated Doughs': ('dairy_eggs', 'biscuit_cookie_dough'),
        'Sour Cream & Dips': ('dairy_eggs', 'sour_cream'),
        'Yogurt': ('dairy_eggs', 'yogurt'),
    },
    'Deli': {
        'Artisan Cheese & Cured Meats': ('deli_prepared_food', 'cheese'),
        'Fresh Dips, Salsas & Hummus': ('deli_prepared_food', 'dip'),
        'Fresh Soups': ('pantry', 'soups_chili'),
        'Meal Kits': ('deli_prepared_food', 'meal_kits'),
        'Packaged Lunch Meat': ('deli_prepared_food', 'meat'),
        'Party Trays': ('deli_prepared_food', 'party_trays'),
        'Prepared Meals & Sides': ('deli_prepared_food', 'ready_meals_snacks'),
        'Prepared Salads & Sandwiches': ('deli_prepared_food', 'ready_meals_snacks'),
        'Sliced Deli Meat & Deli Cheese': ('deli_prepared_food', 'cheese'),
        'Snack Packs & On the Go Snacks': ('deli_prepared_food', 'ready_meals_snacks'),
    },
    'Frozen Foods': {
        'Frozen Appetizers & Snacks': ('frozen_food', 'meals_sides'),
        'Frozen Beef': ('frozen_food', 'meat'),
        'Frozen Bread & Dough': ('frozen_food', 'bread_baked_goods'),
        'Frozen Breakfast Food': ('frozen_food', 'meals_sides'),
        'Frozen Chicken': ('frozen_food', 'meat'),
        'Frozen Desserts': ('frozen_food', 'ice_cream_treats'),
        'Frozen Family Meals': ('frozen_food', 'meals_sides'),
        'Frozen Fish & Seafood': ('frozen_food', 'seafood'),
        'Frozen Fruit': ('frozen_food', 'fruit'),
        'Frozen Meat, Poultry & Seafood': ('frozen_food', 'meat'),
        'Frozen Meatless Alternatives': ('frozen_food', 'meat_alternatives'),
        'Frozen Pizza': ('frozen_food', 'meals_sides'),
        'Frozen Potatoes': ('frozen_food', 'vegetables'),
        'Frozen Single Serve Meals': ('frozen_food', 'meals_sides'),
        'Frozen Turkey': ('frozen_food', 'meat'),
        'Frozen Vegetables': ('frozen_food', 'vegetables'),
        'Ice Cream & Novelties': ('frozen_food', 'ice_cream_treats'),
    },
    'Meat & Seafood': {
        'Bacon': ('meat_seafood', 'pork'),
        'Beef': ('meat_seafood', 'beef'),
        'Chicken': ('meat_seafood', 'poultry'),
        'Fish & Seafood': ('meat_seafood', 'seafood'),
        'Ham': ('meat_seafood', 'pork'),
        'Hot Dogs': ('meat_seafood', 'pork'),
        'Meatless Alternatives': ('meat_seafood', 'tofu_meat_alternatives'),
        'Packaged Lunch Meat': ('deli_prepared_food', 'meat'),
        'Pork': ('meat_seafood', 'pork'),
        'Sausages': ('meat_seafood', 'pork'),
        'Sliced Deli Meat & Deli Cheese': ('deli_prepared_food', 'meat'),
        'Turkey': ('meat_seafood', 'poultry'),
    },
    'Pantry': {
        'Almonds': ('pantry', 'snacks_candy'),
        'Applesauce & Fruit Cups': ('pantry', 'snacks_candy'),
        'Apricot Kernels': ('pantry', 'snacks_candy'),
        'Baking Chips & Cocoa': ('pantry', 'baking_ingredients'),
        'Baking Kits & Mixes': ('pantry', 'baking_ingredients'),
        'Baking Powder, Baking Soda & Yeast': ('pantry', 'baking_ingredients'),
        'Baking Staples': ('pantry', 'baking_ingredients'),
        'Boxed Meals & Side Dishes': ('pantry', 'pantry_meals'),
        'Brazil Nuts': ('pantry', 'snacks_candy'),
        'Canned & Packaged Foods': ('pantry', 'canned_dried_food'),
        'Canned Fruit': ('pantry', 'canned_dried_food'),
        'Canned Meat': ('pantry', 'canned_dried_food'),
        'Canned Tuna & Seafood': ('pantry', 'canned_dried_food'),
        'Canned Vegetables': ('pantry', 'canned_dried_food'),
        'Cashews': ('pantry', 'snacks_candy'),
        'Chestnuts': ('pantry', 'snacks_candy'),
        'Chickpeas': ('pantry', 'snacks_candy'),
        'Condensed & Powdered Milk': ('pantry', 'baking_ingredients'),
        'Condiments': ('pantry', 'condiments'),
        'Cooking Oil & Vinegar': ('pantry', 'dressing_oil_vinegar'),
        'Corn Nuts': ('pantry', 'snacks_candy'),
        'Dried Fruit & Raisins': ('pantry', 'snacks_candy'),
        'Extracts & Food Coloring': ('pantry', 'baking_ingredients'),
        'Flours & Meals': ('pantry', 'baking_ingredients'),
        'Frosting & Icing': ('pantry', 'baking_ingredients'),
        'Fruit Spreads, Jams & Jellies': ('pantry', 'jelly_jam'),
        'Gelatin & Pudding': ('dairy_eggs', 'pudding_gelatin'),
        'Hazelnuts': ('pantry', 'snacks_candy'),
        'Herbs, Rubs & Spices': ('pantry', 'spices_seasonings'),
        'Macadamia Nuts': ('pantry', 'snacks_candy'),
        'Marshmallows': ('pantry', 'baking_ingredients'),
        'Mixed Nuts': ('pantry', 'snacks_candy'),
        'Nut Butters': ('pantry', 'peanut_butter'),
        'Nuts': ('pantry', 'snacks_candy'),
        'Olives, Pickles & Peppers': ('pantry', 'canned_dried_food'),
        'Pasta, Rice & Grains': ('pantry', 'pasta_rice'),
        'Peanut Butter & Spreads': ('pantry', 'peanut_butter'),
        'Peanuts': ('pantry', 'snacks_candy'),
        'Pecans': ('pantry', 'snacks_candy'),
        'Pie Crusts & Filling': ('pantry', 'baking_ingredients'),
        'Pine Nuts': ('pantry', 'snacks_candy'),
        'Pistachios': ('pantry', 'snacks_candy'),
        'Salad Dressings': ('pantry', 'dressing_oil_vinegar'),
        'Salsa & Dips': ('pantry', 'salsa_dip'),
        'Salt & Pepper': ('pantry', 'spices_seasonings'),
        'Sauces & Marinades': ('pantry', 'sauces_marinades'),
        'Soups, Broth & Chili': ('pantry', 'soups_chili'),
        'Soy Nut': ('pantry', 'snacks_candy'),
        'Spices & Seasonings': ('pantry', 'spices_seasonings'),
        'Sprinkles, Candles & Decorations': ('pantry', 'baking_ingredients'),
        'Sugar & Sweeteners': ('pantry', 'sugar_sweeteners'),
        'Syrups & Sauces': ('pantry', 'sauces_marinades'),
        'Walnuts': ('pantry', 'snacks_candy'),
    },
    'Produce': {
        'Fresh Dressings & Dips': ('pantry', 'condiments'),
        'Fresh Fruit': ('fruit_vegetables', 'fruit'),
        'Fresh Juices': ('beverages', 'juice'),
        'Fresh Vegetables': ('fruit_vegetables', 'vegetables'),
        'Meatless Alternatives': ('meat_seafood', 'tofu_meat_alternatives'),
        'Salad Mixes': ('fruit_vegetables', 'vegetables'),
    },
    'Snacks': {
        'Almonds': ('pantry', 'snacks_candy'),
        'Applesauce & Fruit Cups': ('pantry', 'snacks_candy'),
        'Apricot Kernels': ('pantry', 'snacks_candy'),
        'Brazil Nuts': ('pantry', 'snacks_candy'),
        'Butter Crackers': ('pantry', 'snacks_candy'),
        'Candy': ('pantry', 'snacks_candy'),
        'Cashews': ('pantry', 'snacks_candy'),
        'Cheese Crackers': ('pantry', 'snacks_candy'),
        'Chestnuts': ('pantry', 'snacks_candy'),
        'Chickpeas': ('pantry', 'snacks_candy'),
        'Chip Multipacks': ('pantry', 'snacks_candy'),
        'Chips': ('pantry', 'snacks_candy'),
        'Chocolate Candy': ('pantry', 'snacks_candy'),
        'Christmas Candy & Treats': ('pantry', 'snacks_candy'),
        'Cookie Multipacks': ('pantry', 'snacks_candy'),
        'Cookies': ('pantry', 'snacks_candy'),
        'Corn Chips': ('pantry', 'snacks_candy'),
        'Corn Nuts': ('pantry', 'snacks_candy'),
        'Cracker Multipacks': ('pantry', 'snacks_candy'),
        'Crackers': ('pantry', 'snacks_candy'),
        'Dried Fruit & Raisins': ('pantry', 'snacks_candy'),
        'Freeze Dried Candy': ('pantry', 'snacks_candy'),
        'Frozen Appetizers & Snacks': ('frozen_food', 'meals_sides'),
        'Fruit Snacks': ('pantry', 'snacks_candy'),
        'Gelatin & Pudding': ('dairy_eggs', 'pudding_gelatin'),
        'Gluten Free Crackers': ('pantry', 'snacks_candy'),
        'Graham Crackers': ('pantry', 'snacks_candy'),
        'Grain Chips': ('pantry', 'snacks_candy'),
        'Gum & Mints': ('pantry', 'snacks_candy'),
        'Gummy & Chewy Candy': ('pantry', 'snacks_candy'),
        'Hard Candy': ('pantry', 'snacks_candy'),
        'Hazelnuts': ('pantry', 'snacks_candy'),
        'Jerky': ('pantry', 'snacks_candy'),
        'Macadamia Nuts': ('pantry', 'snacks_candy'),
        'Meat Sticks': ('pantry', 'snacks_candy'),
        'Mixed Nuts': ('pantry', 'snacks_candy'),
        'Multigrain, Rice & Seed Crackers': ('pantry', 'snacks_candy'),
        'Nuts': ('pantry', 'snacks_candy'),
        'Peanuts': ('pantry', 'snacks_candy'),
        'Pecans': ('pantry', 'snacks_candy'),
        'Pine Nuts': ('pantry', 'snacks_candy'),
        'Pistachios': ('pantry', 'snacks_candy'),
        'Pita Chips': ('pantry', 'snacks_candy'),
        'Popcorn': ('pantry', 'snacks_candy'),
        'Popcorn & Pretzel Multipacks': ('pantry', 'snacks_candy'),
        'Pork Rinds': ('pantry', 'snacks_candy'),
        'Potato Chips': ('pantry', 'snacks_candy'),
        'Pretzels': ('pantry', 'snacks_candy'),
        'Protein Bars': ('pantry', 'snacks_candy'),
        'Protein Chips': ('pantry', 'snacks_candy'),
        'Puffed Snacks': ('pantry', 'snacks_candy'),
        'Rice Cakes': ('pantry', 'snacks_candy'),
        'Salsa & Dips': ('pantry', 'salsa_dip'),
        'Saltine Crackers': ('pantry', 'snacks_candy'),
        'Sandwich Crackers': ('pantry', 'snacks_candy'),
        'Seeds': ('pantry', 'snacks_candy'),
        'Snack & Granola Bars': ('pantry', 'snacks_candy'),
        'Snack Cakes': ('bakery_bread', 'desserts_pastries'),
        'Snack Mix': ('pantry', 'snacks_candy'),
        'Snack Packs & On the Go Snacks': ('pantry', 'snacks_candy'),
        'Snack Variety Packs': ('pantry', 'snacks_candy'),
        'Sour Candy': ('pantry', 'snacks_candy'),
        'Soy Nut': ('pantry', 'snacks_candy'),
        'Toaster Pastries & Breakfast Bars': ('pantry', 'cereal_breakfast'),
        'Tortilla Chips': ('pantry', 'snacks_candy'),
        'Trail Mix': ('pantry', 'snacks_candy'),
        'Vegetable Chips': ('pantry', 'snacks_candy'),
        'Walnuts': ('pantry', 'snacks_candy'),
    },
}

CATEGORY_MAP = {
    'heb': HEB_CATEGORY_MAP,
    'walmart': WALMART_CATEGORY_MAP,
    'central_market': CENTRALMARKET_CATEGORY_MAP,
    'costco': COSTCO_CATEGORY_MAP,
    'traderjoes': TRADERJOES_CATEGORY_MAP,
    'whole_foods': WHOLEFOODS_CATEGORY_MAP,
    'target': TARGET_CATEGORY_MAP,
}

def normalize_category(retailer: str, category_path: str, parent: str = None) -> tuple[str, str | None]:
    """Map retailer category to Goods taxonomy.
    
    Args:
        retailer: Retailer identifier ('heb', 'walmart', 'central_market', 'costco', 'traderjoes', 'whole_foods', 'target', etc.)
        category_path: Retailer-specific category/subcategory name
        parent: Parent category name (required for HEB, Central Market, Costco, Trader Joe's, Whole Foods, and Target due to nested structure)
        
    Returns:
        Tuple of (goods_category, goods_subcategory) or ('uncategorized', None) if not found
    """
    mapping = CATEGORY_MAP.get(retailer, {})
    
    # HEB, Central Market, Costco, Trader Joe's, Whole Foods, and Target use nested structure (parent -> subcategory)
    if retailer in ('heb', 'central_market', 'costco', 'traderjoes', 'whole_foods', 'target') and parent:
        parent_map = mapping.get(parent, {})
        return parent_map.get(category_path, ('uncategorized', None))
    
    # Walmart uses flat structure
    return mapping.get(category_path, ('uncategorized', None))
```

